import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as i,o as l,c as p,a as n,f as a,b as s,e as o}from"./app-B1UaDH9J.js";const r={},c=n("p",null,"也算折腾了好几天，终于在Windows上把Tensorflow和GPU加速配置好了，跟大家分享一下经验。目前实验室服务器上木有显卡，所以以后实验室土豪了装了显卡我再去摸索Linux怎么配置这个，估计套路差不多。",-1),d=n("blockquote",null,[n("ul",null,[n("li",null,"怎么安装Tensorflow"),n("li",null,"怎么配置GPU加速"),n("li",null,"出现的各种问题以及修复策略")])],-1),u=n("hr",null,null,-1),h=n("p",null,"Tensorflow就不用简介了，谷歌的深度学习框架，也是目前最火的深度学习框架。其他的框架还有Caffe，Theano，MXNet等等。我是个小白，其他没用过，就不说了=-=，详细的大家可以看",-1),g={href:"https://www.oschina.net/news/80593/deep-learning-frameworks-a-review-before-finishing-2016",target:"_blank",rel:"noopener noreferrer"},f=o('<h2 id="怎么安装tensorflow" tabindex="-1"><a class="header-anchor" href="#怎么安装tensorflow"><span>怎么安装Tensorflow</span></a></h2><p>Tensorflow更新的好快，在年初我开始学的时候是1.1版本，现在已经更新到1.90了。</p><p>最近的新版本很多大佬都说好，因为对新人很友好，除了很多高级API（就是用更少的代码实现功能），1.9版本还加入了对keras的直接支持。</p><figure><img src="https://pic.atlasbioinfo.com/tensorflowLogo.jpg" alt="tensorflowLogo" tabindex="0" loading="lazy"><figcaption>tensorflowLogo</figcaption></figure><p>安装Tensorflow最简单的方法有2种：</p><ol><li>Anaconda和Conda</li><li>pip</li></ol><p>推荐大家用第一种，windows和linux都是。</p><p>Anaconda是一个python的包管理器，里面有大多数数据处理的包还自带Jupyter Notebook等。 安装很简单，就是从官网下正确的版本，之后一路点next。</p>',8),m={href:"https://www.anaconda.com/download/",target:"_blank",rel:"noopener noreferrer"},b=o(`<p>安装好之后，windows用户可以直接点Anaconda Navigator进入这个界面，点Enviroments，之后需要安装哪个就点哪个就好了，最后点apply就安装了。</p><figure><img src="https://pic.atlasbioinfo.com/anacondaTensor.PNG" alt="AnacondaTensor" tabindex="0" loading="lazy"><figcaption>AnacondaTensor</figcaption></figure><p>或者，直接cmd启动命令行终端，或者打开windows10特有的Windows PowerShell，输入：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>conda <span class="token function">install</span> tensorflow tensorflow-gpu
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>简单吧。其中，tensorflow是主程序，-gpu的那个可以支持gpu加速。如果你只需要CPU计算就可以了，那么可以不安装这个或者不care我后面写的其他的，直接开始跑程序就好了。</p><p>不过有一点很重要，就是安装前需要先更新一下源，就是你下载软件的地方。额，再详细点吧，就是比如你点了apply或者输入了conda install XXX后，都会从一个网站下载软件到你的目录下，再解压缩执行安装。</p><p>目前国内比较好的就是清华的源，再命令行输入以下3行：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>conda config <span class="token parameter variable">--add</span> channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
conda config <span class="token parameter variable">--add</span> channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/
conda config <span class="token parameter variable">--set</span> show_channel_urls <span class="token function">yes</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意，这两个源都得加哦，要不很多软件下不到或者更新不到最新版本。</p><p>今天是7月14号，目前这个源tensorflow最新的为1.8，cudnntoolkit(后面讲)最新版本为9.0。所以如果需要下载最新版本tensorflow的可以用Pip:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>pip <span class="token function">install</span> tensorflow tensorflow-gpu
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果你已经用conda安装了tensorflow，这时候就报错，装不上了，需要另一个命令，更新：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>pip <span class="token function">install</span> <span class="token parameter variable">--upgrade</span> tensorflow tensorflow-gpu
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这样，就安装好了。</p><h2 id="怎么配置gpu加速" tabindex="-1"><a class="header-anchor" href="#怎么配置gpu加速"><span>怎么配置GPU加速</span></a></h2><p>前面讲到需要安装tensorflow-gpu，并不是安装了这个就直接可以GPU加速了。GPU加速是依赖Nvidia的CUDA GPU加速软件包的，所以我们需要安装CUDA GPU加速包和专门为深度学习设计的cuDNN包。</p><p>差点忘了说了，为社么要用GPU加速呢？我CPU不是也可以好好运行吗？其实深度学习计算量相当大，但是每个计算量都不算太繁重。</p><p>这么说吧，CPU是一个大力士，比如最新的i7 8770就可以被认为是12个大力士（6核12线程）；而GPU是小学生，但是很多，比如GTX1080Ti，就像是3584个小学生（3584个流处理器单元）。如果你让这两组人搬100个巨石，那大力士肯定厉害，小学生都被累趴了也搬不动。但是如果让这两组人去送10000封信，那很明显是小学生厉害啊，人多。而深度学习就很类似去送10000封信，大力士每次送12封，小学生每次送3000多封，肯定GPU有优势嘛！</p><p>回到安装上，有一点需要注意的就是，版本问题。tensorflow并不是通识所有版本的CUDA的，目前我验证过的是1.8和1.9版本的tensorflow可以使用9.0版本的CUDA和cnDNN。低于1.8的tensorflow就不行=-=。</p><p>安装就是在官网下载制定版本的CUDA和cnDNN就行了。</p>`,20),v={href:"https://developer.nvidia.com/cuda-downloads",target:"_blank",rel:"noopener noreferrer"},w=n("figure",null,[n("img",{src:"https://pic.atlasbioinfo.com/cudaDownLoad.PNG",alt:"CUDAdownload",tabindex:"0",loading:"lazy"}),n("figcaption",null,"CUDAdownload")],-1),k=n("p",null,[a("注意："),n("strong",null,"在安装CUDA的时候，它会检验physX和Nvidia Geforce Experence，这两个软件如果你之前安装过更高版本的，就没办法安装CUDA，需要把高版本的这两个软件卸载才行")],-1),_={href:"https://developer.nvidia.com/cudnn",target:"_blank",rel:"noopener noreferrer"},P=o('<figure><img src="https://pic.atlasbioinfo.com/cuDNNdownload.PNG" alt="cuDNN下载" tabindex="0" loading="lazy"><figcaption>cuDNN下载</figcaption></figure><p>注意，cuDNN下载的时候Nvidia要求注册他们的账号登陆，并填一个调查问卷，填好就可以下载了。</p><p>cuDNN不需要安装，解压缩之后有一个include和一个lib64 2个文件夹。把这两个里面的东西直接复制粘贴到你安装CUDA目录里对应文件夹里就行了。这个是Windows的安装，linux似乎不是这样（以后自己试过跟大家再详细说）</p><p>其实，似乎还有一个简单的方案，就是直接在Anaconda里面安装cudatoolkit似乎就行=-=，不过每次都是安装完前两个才想到这种方法，所以不知道是不是单独用anaconda安装就可以实现。有兴趣的朋友可以试试。</p><figure><img src="https://pic.atlasbioinfo.com/AnacondaCuda.PNG" alt="AnacondaCuda" tabindex="0" loading="lazy"><figcaption>AnacondaCuda</figcaption></figure><p>如果安装好了之后，打开你运行python的IDE（我用的是PyCharm），运行下面的命令：</p><div class="language-python line-numbers-mode" data-ext="py" data-title="py"><pre class="language-python"><code><span class="token keyword">import</span> tensorflow <span class="token keyword">as</span> tf\nsess <span class="token operator">=</span> tf<span class="token punctuation">.</span>Session<span class="token punctuation">(</span>config<span class="token operator">=</span>tf<span class="token punctuation">.</span>ConfigProto<span class="token punctuation">(</span>log_device_placement<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>如果出现下图，现实GPU信息，就说明成功了：</p><figure><img src="https://pic.atlasbioinfo.com/successGPUTensorflow.PNG" alt="success" tabindex="0" loading="lazy"><figcaption>success</figcaption></figure><h2 id="出现的各种问题以及修复策略" tabindex="-1"><a class="header-anchor" href="#出现的各种问题以及修复策略"><span>出现的各种问题以及修复策略</span></a></h2><h3 id="futurewarning-conversion-of-the-second-argument" tabindex="-1"><a class="header-anchor" href="#futurewarning-conversion-of-the-second-argument"><span>FutureWarning: Conversion of the second argument...</span></a></h3><p>完整的报错为：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>FutureWarning: Conversion of the second argument of issubdtype from <span class="token variable"><span class="token variable">`</span>float<span class="token variable">`</span></span> to <span class="token variable"><span class="token variable">`</span>np.floating<span class="token variable">`</span></span> is deprecated. In future, it will be treated as <span class="token variable"><span class="token variable">`</span>np.float64 <span class="token operator">==</span> np.dtype<span class="token punctuation">(</span>float<span class="token punctuation">)</span>.type<span class="token variable">`</span></span>.from ._conv <span class="token function">import</span> register_converters as _register_converters\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这是因为h5py包没装好，装好就行了。</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>pip <span class="token function">install</span> <span class="token assign-left variable">h5py</span><span class="token operator">==</span><span class="token number">2.8</span>.0rc1\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="h5py包装不上" tabindex="-1"><a class="header-anchor" href="#h5py包装不上"><span>h5py包装不上</span></a></h3><p>那需要安装msgpack包，同样的方法，见下图：</p><figure><img src="https://pic.atlasbioinfo.com/msgpackInstall.PNG" alt="msgInstall" tabindex="0" loading="lazy"><figcaption>msgInstall</figcaption></figure><h3 id="小技巧-用迅雷加速下载" tabindex="-1"><a class="header-anchor" href="#小技巧-用迅雷加速下载"><span>小技巧：用迅雷加速下载</span></a></h3><p>在你用pip install的时候下载速度可能会比较慢，这时候你可以把那个带安装包whl的下载链接复制下来，用迅雷等软件下好，之后本地安装。本地安装也很简单, 命令行切换到到那个目录，之后:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>pip <span class="token function">install</span> ./tensorflow_1_9_0.whl\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>就好了。</p><h3 id="简单的模型cpu似乎更快" tabindex="-1"><a class="header-anchor" href="#简单的模型cpu似乎更快"><span>简单的模型CPU似乎更快</span></a></h3><p>楼主用一个简单的序列模型进行测试（5层32unit全连接），发现CPU比GPU快4倍多！</p><p>这个是用GPU计算时的占用图：</p><figure><img src="https://pic.atlasbioinfo.com/logo.png" alt="博主简介" tabindex="0" loading="lazy"><figcaption>博主简介</figcaption></figure>',26);function y(N,T){const e=i("ExternalLinkIcon");return l(),p("div",null,[c,d,u,h,n("p",null,[n("em",null,[n("strong",null,[n("a",g,[a("对比深度学习十大框架：TensorFlow 并非最好？"),s(e)])])])]),f,n("p",null,[n("em",null,[n("strong",null,[n("a",m,[a("Anaconda官网"),s(e)])])])]),b,n("p",null,[n("strong",null,[n("a",v,[a("CUDA官网下载"),s(e)])])]),w,k,n("p",null,[n("strong",null,[n("a",_,[a("cuDNN官网下载"),s(e)])])]),P])}const x=t(r,[["render",y],["__file","20180714.html.vue"]]),C=JSON.parse('{"path":"/posts/AI/20180714.html","title":"Windows10环境下Tensorflow的安装和GPU加速配置","lang":"zh-CN","frontmatter":{"icon":"robot","date":"2018-07-14T00:00:00.000Z","title":"Windows10环境下Tensorflow的安装和GPU加速配置","categories":["AI"],"description":"也算折腾了好几天，终于在Windows上把Tensorflow和GPU加速配置好了，跟大家分享一下经验。目前实验室服务器上木有显卡，所以以后实验室土豪了装了显卡我再去摸索Linux怎么配置这个，估计套路差不多。 怎么安装Tensorflow 怎么配置GPU加速 出现的各种问题以及修复策略 Tensorflow就不用简介了，谷歌的深度学习框架，也是目前最...","head":[["meta",{"property":"og:url","content":"https://blog.atlasbioinfo.com/posts/AI/20180714.html"}],["meta",{"property":"og:site_name","content":"ATLAS生物信息博客"}],["meta",{"property":"og:title","content":"Windows10环境下Tensorflow的安装和GPU加速配置"}],["meta",{"property":"og:description","content":"也算折腾了好几天，终于在Windows上把Tensorflow和GPU加速配置好了，跟大家分享一下经验。目前实验室服务器上木有显卡，所以以后实验室土豪了装了显卡我再去摸索Linux怎么配置这个，估计套路差不多。 怎么安装Tensorflow 怎么配置GPU加速 出现的各种问题以及修复策略 Tensorflow就不用简介了，谷歌的深度学习框架，也是目前最..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://pic.atlasbioinfo.com/tensorflowLogo.jpg"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-20T11:04:46.000Z"}],["meta",{"property":"article:author","content":"Haopeng Yu"}],["meta",{"property":"article:published_time","content":"2018-07-14T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-03-20T11:04:46.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Windows10环境下Tensorflow的安装和GPU加速配置\\",\\"image\\":[\\"https://pic.atlasbioinfo.com/tensorflowLogo.jpg\\",\\"https://pic.atlasbioinfo.com/anacondaTensor.PNG\\",\\"https://pic.atlasbioinfo.com/cudaDownLoad.PNG\\",\\"https://pic.atlasbioinfo.com/cuDNNdownload.PNG\\",\\"https://pic.atlasbioinfo.com/AnacondaCuda.PNG\\",\\"https://pic.atlasbioinfo.com/successGPUTensorflow.PNG\\",\\"https://pic.atlasbioinfo.com/msgpackInstall.PNG\\",\\"https://pic.atlasbioinfo.com/logo.png\\"],\\"datePublished\\":\\"2018-07-14T00:00:00.000Z\\",\\"dateModified\\":\\"2024-03-20T11:04:46.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Haopeng Yu\\",\\"url\\":\\"https://github.com/atlasbioinfo\\"}]}"]]},"headers":[{"level":2,"title":"怎么安装Tensorflow","slug":"怎么安装tensorflow","link":"#怎么安装tensorflow","children":[]},{"level":2,"title":"怎么配置GPU加速","slug":"怎么配置gpu加速","link":"#怎么配置gpu加速","children":[]},{"level":2,"title":"出现的各种问题以及修复策略","slug":"出现的各种问题以及修复策略","link":"#出现的各种问题以及修复策略","children":[{"level":3,"title":"FutureWarning: Conversion of the second argument...","slug":"futurewarning-conversion-of-the-second-argument","link":"#futurewarning-conversion-of-the-second-argument","children":[]},{"level":3,"title":"h5py包装不上","slug":"h5py包装不上","link":"#h5py包装不上","children":[]},{"level":3,"title":"小技巧：用迅雷加速下载","slug":"小技巧-用迅雷加速下载","link":"#小技巧-用迅雷加速下载","children":[]},{"level":3,"title":"简单的模型CPU似乎更快","slug":"简单的模型cpu似乎更快","link":"#简单的模型cpu似乎更快","children":[]}]}],"git":{"createdTime":1710932686000,"updatedTime":1710932686000,"contributors":[{"name":"hyu","email":"hp.yu@outlook.com","commits":1}]},"readingTime":{"minutes":5.82,"words":1746},"filePathRelative":"posts/AI/20180714.md","localizedDate":"2018年7月14日","excerpt":"<p>也算折腾了好几天，终于在Windows上把Tensorflow和GPU加速配置好了，跟大家分享一下经验。目前实验室服务器上木有显卡，所以以后实验室土豪了装了显卡我再去摸索Linux怎么配置这个，估计套路差不多。</p>\\n<blockquote>\\n<ul>\\n<li>怎么安装Tensorflow</li>\\n<li>怎么配置GPU加速</li>\\n<li>出现的各种问题以及修复策略</li>\\n</ul>\\n</blockquote>\\n<hr>\\n<p>Tensorflow就不用简介了，谷歌的深度学习框架，也是目前最火的深度学习框架。其他的框架还有Caffe，Theano，MXNet等等。我是个小白，其他没用过，就不说了=-=，详细的大家可以看</p>","autoDesc":true}');export{x as comp,C as data};
