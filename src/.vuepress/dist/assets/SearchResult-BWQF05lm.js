import{l as O,i as Z,m as ee,p as _,q as te,s as se,v as ae,x as le,j as F,y as S,z as re,A as U,k as s,B as T,C as W,R as $,D as oe,E as ne,G as ie,H as ue,I as ce,J as pe,K as he,L as ye,O as me,M as ve,N as de,P as ge,Q as Ee,S as fe,T as L}from"./app-B1UaDH9J.js";const Ae=["/","/intro.html","/demos/","/demos/disable.html","/demos/encrypt.html","/demos/layout.html","/demos/markdown.html","/demos/page.html","/en/","/en/intro.html","/en/demo/","/en/demo/disable.html","/en/demo/encrypt.html","/en/demo/layout.html","/en/demo/markdown.html","/en/demo/page.html","/en/posts/cherry.html","/en/posts/dragonfruit.html","/en/posts/strawberry.html","/en/posts/tomato.html","/posts/AI/20180714.html","/posts/AI/20180715.html","/posts/Bioinformatics/20201211.html","/posts/Bioinformatics/20210901.html","/posts/Bioinformatics/20230822.html","/posts/MyDiary/20170908.html","/posts/MyDiary/20190301.html","/posts/MyDiary/20200130.html","/posts/MyDiary/20200712.html","/posts/MyDiary/20221006.html","/posts/Python/20180413.html","/posts/Python/20200605.html","/posts/Python/20200620.html","/posts/Python/20211215.html","/posts/Perl/20170929.html","/posts/Perl/20200103.html","/posts/R/20180613.html","/posts/R/20181013.html","/en/posts/apple/1.html","/en/posts/apple/2.html","/en/posts/apple/3.html","/en/posts/apple/4.html","/posts/Website/20180706.html","/posts/Website/20181024.html","/posts/Website/20181107.html","/posts/Website/20181112.html","/posts/Website/20190612.html","/posts/Website/20211010.html","/en/posts/banana/1.html","/en/posts/banana/2.html","/en/posts/banana/3.html","/en/posts/banana/4.html","/404.html","/en/posts/","/posts/AI/","/posts/","/posts/Bioinformatics/","/posts/MyDiary/","/posts/Python/","/posts/Perl/","/posts/R/","/en/posts/apple/","/posts/Website/","/en/posts/banana/","/category/","/category/guide/","/category/ai/","/category/bioinformatics/","/category/mydiary/","/category/python/","/category/perl/","/category/r/","/category/website/","/en/category/","/en/category/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/en/category/%E6%8C%87%E5%8D%97/","/en/category/%E6%A8%B1%E6%A1%83/","/en/category/%E7%81%AB%E9%BE%99%E6%9E%9C/","/en/category/%E6%B0%B4%E6%9E%9C/","/en/category/%E8%8D%89%E8%8E%93/","/en/category/%E8%94%AC%E8%8F%9C/","/en/category/%E8%8B%B9%E6%9E%9C/","/en/category/%E9%A6%99%E8%95%89/","/tag/","/tag/disable/","/tag/encryption/","/tag/layout/","/tag/markdown/","/tag/page-config/","/tag/guide/","/en/tag/","/en/tag/%E7%A6%81%E7%94%A8/","/en/tag/%E5%8A%A0%E5%AF%86/","/en/tag/%E5%B8%83%E5%B1%80/","/en/tag/markdown/","/en/tag/%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE/","/en/tag/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","/en/tag/%E7%BA%A2/","/en/tag/%E5%B0%8F/","/en/tag/%E5%9C%86/","/en/tag/%E5%A4%A7/","/en/tag/%E9%BB%84/","/en/tag/%E5%BC%AF%E6%9B%B2%E7%9A%84/","/en/tag/%E9%95%BF/","/article/","/en/article/","/star/","/en/star/","/timeline/","/en/timeline/"],Be="SEARCH_PRO_QUERY_HISTORY",m=O(Be,[]),be=()=>{const{queryHistoryCount:a}=L,l=a>0;return{enabled:l,queryHistory:m,addQueryHistory:r=>{l&&(m.value.length<a?m.value=Array.from(new Set([r,...m.value])):m.value=Array.from(new Set([r,...m.value.slice(0,a-1)])))},removeQueryHistory:r=>{m.value=[...m.value.slice(0,r),...m.value.slice(r+1)]}}},q=a=>Ae[a.id]+("anchor"in a?`#${a.anchor}`:""),Re="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:P}=L,v=O(Re,[]),Ce=()=>{const a=P>0;return{enabled:a,resultHistory:v,addResultHistory:l=>{if(a){const r={link:q(l),display:l.display};"header"in l&&(r.header=l.header),v.value.length<P?v.value=[r,...v.value]:v.value=[r,...v.value.slice(0,P-1)]}},removeResultHistory:l=>{v.value=[...v.value.slice(0,l),...v.value.slice(l+1)]}}},De=a=>{const l=ce(),r=_(),H=pe(),n=F(!1),g=he([]);return ye(()=>{const{search:B,terminate:d}=me(),b=()=>{g.value=[],n.value=!1},E=fe(h=>{n.value=!0,h?B(h,r.value,l.value).then(y=>{var R,f;return((f=(R=l.value).searchFilter)==null?void 0:f.call(R,y,h,r.value,H.value))??y}).then(y=>{g.value=y,n.value=!1}).catch(y=>{console.error(y),b()}):b()},L.searchDelay);U([a,r],()=>E(a.value),{immediate:!0}),ve(()=>{d()})}),{searching:n,results:g}};var ke=Z({name:"SearchResult",props:{query:{type:String,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(a,{emit:l}){const r=ee(),H=_(),n=te(se),{enabled:g,addQueryHistory:B,queryHistory:d,removeQueryHistory:b}=be(),{enabled:E,resultHistory:h,addResultHistory:y,removeResultHistory:R}=Ce(),f=g||E,k=ae(a,"query"),{results:A,searching:j}=De(k),o=le({isQuery:!0,index:0}),c=F(0),p=F(0),M=S(()=>f&&(d.value.length>0||h.value.length>0)),w=S(()=>A.value.length>0),Q=S(()=>A.value[c.value]||null),Y=()=>{const{isQuery:e,index:t}=o;t===0?(o.isQuery=!e,o.index=e?h.value.length-1:d.value.length-1):o.index=t-1},z=()=>{const{isQuery:e,index:t}=o;t===(e?d.value.length-1:h.value.length-1)?(o.isQuery=!e,o.index=0):o.index=t+1},G=()=>{c.value=c.value>0?c.value-1:A.value.length-1,p.value=Q.value.contents.length-1},J=()=>{c.value=c.value<A.value.length-1?c.value+1:0,p.value=0},K=()=>{p.value<Q.value.contents.length-1?p.value+=1:J()},N=()=>{p.value>0?p.value-=1:G()},x=e=>e.map(t=>de(t)?t:s(t[0],t[1])),V=e=>{if(e.type==="customField"){const t=ge[e.index]||"$content",[i,D=""]=Ee(t)?t[H.value].split("$content"):t.split("$content");return e.display.map(u=>s("div",x([i,...u,D])))}return e.display.map(t=>s("div",x(t)))},C=()=>{c.value=0,p.value=0,l("updateQuery",""),l("close")};return re("keydown",e=>{if(a.isFocusing){if(w.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")K();else if(e.key==="Enter"){const t=Q.value.contents[p.value];B(a.query),y(t),r.push(q(t)),C()}}else if(E){if(e.key==="ArrowUp")Y();else if(e.key==="ArrowDown")z();else if(e.key==="Enter"){const{index:t}=o;o.isQuery?(l("updateQuery",d.value[t]),e.preventDefault()):(r.push(h.value[t].link),C())}}}}),U([c,p],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>s("div",{class:["search-pro-result-wrapper",{empty:k.value?!w.value:!M.value}],id:"search-pro-results"},k.value===""?f?M.value?[g?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},n.value.queryHistory),d.value.map((e,t)=>s("div",{class:["search-pro-result-item",{active:o.isQuery&&o.index===t}],onClick:()=>{l("updateQuery",e)}},[s(T,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},e),s("button",{class:"search-pro-remove-icon",innerHTML:W,onClick:i=>{i.preventDefault(),i.stopPropagation(),b(t)}})]))])):null,E?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},n.value.resultHistory),h.value.map((e,t)=>s($,{to:e.link,class:["search-pro-result-item",{active:!o.isQuery&&o.index===t}],onClick:()=>{C()}},()=>[s(T,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[e.header?s("div",{class:"content-header"},e.header):null,s("div",e.display.map(i=>x(i)).flat())]),s("button",{class:"search-pro-remove-icon",innerHTML:W,onClick:i=>{i.preventDefault(),i.stopPropagation(),R(t)}})]))])):null]:n.value.emptyHistory:n.value.emptyResult:j.value?s(oe,{hint:n.value.searching}):w.value?s("ul",{class:"search-pro-result-list"},A.value.map(({title:e,contents:t},i)=>{const D=c.value===i;return s("li",{class:["search-pro-result-list-item",{active:D}]},[s("div",{class:"search-pro-result-title"},e||n.value.defaultTitle),t.map((u,X)=>{const I=D&&p.value===X;return s($,{to:q(u),class:["search-pro-result-item",{active:I,"aria-selected":I}],onClick:()=>{B(a.query),y(u),C()}},()=>[u.type==="text"?null:s(u.type==="title"?ne:u.type==="heading"?ie:ue,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[u.type==="text"&&u.header?s("div",{class:"content-header"},u.header):null,s("div",V(u))])])})])})):n.value.emptyResult)}});export{ke as default};
